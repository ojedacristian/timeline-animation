<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./output.css">
  <title>TimeLine Animation</title>
</head>

<body class="overflow-hidden">
  <main class="relative">
    <!-- <main class="flex"> -->

    <section class="w-full h-screen bg-orange-200 flex items-center justify-center">
      <h1 class="text-5xl text-blue-900">Justitia y Pace</h1>
    </section>
    <div class="wrapper w-[200vw]">
      <div class="races flex flex-nowrap">
        <section class="slide-1 w-full h-screen bg-orange-200 flex items-center justify-center relative">
            <div class="timeline h-4 bg-red-700 text-red-400 w-[180svw] absolute z-50"></div>
        </section>
        <!-- <section class="w-full h-screen">
          asdadasdsad
        </section> -->
        <section class="slide-2 w-full text-red-700 text-4xl font-semibold h-screen bg-orange-200 relative">
          <img src="./public/oldmap.png" class="opacity-10 w-full h-full relative z-0" alt="">
          <div class="absolute top-0 left-0 z-10 h-screen flex flex-col w-3/5">
            <div class="h-1/2 flex justify-center items-end">
              <div>
                <p class="text-yellow-600 text-9xl font-bold flex" id="year">
                  <span class="letters">1</span>
                  <span class="letters">8</span>
                  <span class="letters">6</span>
                  <span class="letters">3</span>
                </p>
              </div>
              <div class="flex gap-4">
                <img src="./public/henrydunant.jpg" class="w-52 character" alt="">
                <p class="text-yellow-600 uppercase text-xl font-semibold name">Henry <br>Dunant</p>
              </div>
            </div>
            <div class="h-1/2 mx-auto mt-20">
              <div class="line bg-yellow-50 px-4 opacity-80">
                <span>Croix-Rouge internationale</span>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
    <section class="w-full h-screen bg-orange-200 flex items-center justify-center">
      <h1 class="text-5xl text-blue-900">Other Section</h1>
    </section>
  </main>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script src="https://unpkg.com/@studio-freight/lenis@1.0.36/dist/lenis.min.js"></script>
  <script>

    const races = document.querySelector('.races')
    console.log(races.offsetWidth)

    function getScrollAmount() {
      let racesWidth = races.scrollWidth;
      return -(racesWidth - window.innerWidth)
    }

    let tl = gsap.timeline({
      scrollTrigger: {
        trigger: '.wrapper',
        start: 'top top',
        pin: true,
        end: () => `+=${getScrollAmount() * -1}`,
        scrub: true,
        markers: true,
      }
    })
    tl
      .from('.timeline', {
        x:'-100%'
      })
      .to('.races',{
        x: getScrollAmount
      })
      .from('.letters', {
      opacity: 0,
      y: '100',
      stagger: 0.05
    })
      .from('.line', {
        x: -100,
        opacity: 0
      })
      .from('.character', {
        opacity: 0,
        scale: 0,
      })
      .from('.name', {
        opacity: 0,
        y: -50
      })


    // LENIS
    const lenis = new Lenis()
    lenis.on('scroll', (e) => {
      console.log(e)
    })

    lenis.on('scroll', ScrollTrigger.update)

    gsap.ticker.add((time) => {
      lenis.raf(time * 1000)
    })

    gsap.ticker.lagSmoothing(0)

  </script>
  <!-- <script type="module" src="/main.js"></script> -->
</body>

</html>